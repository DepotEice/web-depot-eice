@page "/"
@page "/index"
@using AutoMapper;
@using Web.DepotEice.BLL.IServices;
@using Web.DepotEice.BLL.Models;
@using Web.DepotEice.UIL.Models;

@inject ILogger<Index> Logger;
@inject IArticleService ArticleService;
@inject IMapper Mapper;

<PageTitle>Accueil</PageTitle>

<div class="banner">
    @{
        /*Banner*/
    }
    <img src="https://www.etudierenhainaut.be/images/editeurs/119634258_988675168222129_1203433725708972538_o.webp"
         alt="banner" class="img-fluid" style="width:100%; height:100%" />
</div>

<div class="container-fluid body-content">

    <div class="row py-5 mx-1">
        <div class="col-lg-8 border-end">
            @foreach (var article in articles)
            {
                <div class="row justify-content-between p-2 mb-4 border-bottom me-2" style="">
                    <div class="">
                        <h1 class="display-4 fst-italic"><a class="link-dark " href="">@article.Title</a></h1>
                        <p class="lead my-3">@((MarkupString)article.BodyNoHTML)</p>
                        <p class="lead mb-0 align-bottom pb-4"><a href="#" class="fw-bold">Continuer à lire...</a></p>
                    </div>
                </div>
            }

            @* <div class="p-4 p-md-5 mb-4 text-white rounded bg-dark" style="">
            <div class="col-6 px-0">
            <h1 class="display-4 fst-italic">Title of a longer featured blog post</h1>
            <p class="lead mb-0"><a href="#" class="text-white fw-bold">Continue reading...</a></p>
            </div>

            <div class="col-6 px-0">
            <img src="" />
            </div>
            </div> *@
        </div>
        <div class="col-lg-4 mt-3">
            <h3 class="text-center">À ne pas rater</h3>

            @foreach (var article in articles)
            {
                <div class="row justify-content-between p-2 my-4 mx-2">
                    <h5 class="fst-italic"><a class="link-secondary" href="#"> @article.Title</a></h5>
                </div>
            }
        </div>
    </div>

    <div class="">
        <div class="row m-1 py-5" style="background: #F7f7f7">
            <div class="col-lg-6">
                <img src="https://www.etudierenhainaut.be/images/editeurs/20191015_132538.webp" alt="school"
                     style="border-radius: 50%;" class="img-fluid p-3" />
            </div>
            <div class="col-lg-6 d-flex align-items-center">
                <span style="font-size:larger">
                    L'Ecole Industrielle et Commerciale d’Ecaussinnes propose des formations de niveau secondaire en
                    bureautique, art floral, loisirs créatifs, œnologie, anglais et espagnol mais également un
                    formation d’enseignement supérieur, le bachelier en informatique de gestion.

                    Ces formations répondent aux besoins du marché du travail et correspondent aux demandes formulées
                    par les employeurs et les administrations.
                </span>
            </div>
        </div>

        <div class="row m-1 py-5">
            <div class="col-lg-6 d-flex align-items-center">
                <span style="font-size:larger">
                    Un certain nombre de ces formations font partie de la liste des métiers en pénurie du Forem et de la
                    Région Wallonne.

                    La mise à l’emploi, notamment de nos informaticiens, est très rapide.

                    En tant qu’établissement d’enseignement supérieur, l’établissement fait partie du pôle hainuyer et de
                    l’Académie de Recherche et d’Enseignement Supérieur.
                </span>
            </div>
            <div class="col-lg-6">
                <img src="images/penurie.jpg" alt="penurie" style="border-radius: 50%;" class="img-fluid p-3" />
            </div>
        </div>

        <div class="row m-1 py-5" style="background: #F7f7f7">
            <div class="col-lg-6">
                <img src="images/teaching.jpg" alt="teaching" style="border-radius: 50%" class="img-fluid p-3" />
            </div>
            <div class="col-lg-6 d-flex align-items-center" style="font-size:larger">
                <span style="font-size:larger">
                    Ces instances ont pour rôle de réguler l’enseignement supérieur, assurer l’information relative à
                    celui-ci et favoriser les collaborations entre les différents acteurs de l’enseignement.
                </span>
            </div>
        </div>
    </div>

</div>

@code {
    List<ArticleIndexModel> articles = new List<ArticleIndexModel>();

    protected override async Task OnInitializedAsync()
    {
        var art = (await ArticleService.GetArticlesAsync());

        articles = Mapper.Map<List<ArticleIndexModel>>(art);

        articles = articles.OrderBy(a => a.UpdatedAt).ThenBy(a => a.CreatedAt).ToList();
    }
}